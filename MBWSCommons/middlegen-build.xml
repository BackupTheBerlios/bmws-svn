<?xml version="1.0" encoding="utf-8"?>

<!--
  This build file is generated by MiddlegenIDE.
  
  MiddlegenIDE: http://ultimania.org/middlegenide/
-->

<project name="Middlegen Hibernate" default="compile" basedir=".">
   <property file="./build.properties"/>
   <property name="hibernate.cascade"    value="all" />
   <property name="package"              value="de.mbws.common.data.db.generated" />
   <property name="gen.xdoclet-tag"      value="false" />
   <property name="gui"                  value="true" />
   <property name="jdbc.jar"             value="lib\mysql-connector-java-3.1.8-bin.jar" />
   <property name="database.driver"      value="com.mysql.jdbc.Driver" />
   <property name="lib.dir"              value="/d:/Programmierung/eclipse/plugins/net.sf.middlegen_2.1.91/lib/" />
   <property name="database.url"         value="jdbc:mysql://localhost:3306/game" />
   <property name="database.userid"      value="root" />
   <property name="database.password"    value="" />
   <property name="database.schema"      value="" />
   <property name="database.catalog"     value="" />
   <property name="dest.dir"             value="src" />

   <target name="init" depends="prepare,fail-if-no-middlegen,fail-if-no-hibernate,fail-if-no-hibernate-ext">

     <taskdef
        name="middlegen"
        classname="middlegen.MiddlegenTask"
        classpathref="middlegen.classpath"
     />

     <taskdef
        name="hbm2java"
        classname="net.sf.hibernate.tool.hbm2java.Hbm2JavaTask"
        classpathref="hibernate-ext.classpath"
     />

    <mkdir dir="${dest.dir}"/>
   
   </target>

   <target name="prepare">

     <path id="middlegen.classpath">
        <pathelement path="${jdbc.jar}"/>
        <fileset dir="${lib.dir}" includes="*.jar"/>
     </path>

     <path id="hibernate-ext.classpath">
       <fileset dir="${lib.dir}"           includes="*.jar"/>
     </path>

     <available property="middlegen" classname="middlegen.MiddlegenTask" classpathref="middlegen.classpath"/>
     <available property="hibernate" classname="net.sf.hibernate.Hibernate" classpathref="hibernate-ext.classpath"/>
     <available property="hibernate-ext" classname="net.sf.hibernate.tool.hbm2java.Hbm2JavaTask" classpathref="hibernate-ext.classpath"/>


   </target>

   <target name="fail-if-no-middlegen" unless="middlegen">
      <fail>
      Middlegen is not found. Please install Middlegen.
      </fail>
   </target>

   <target name="fail-if-no-hibernate" unless="hibernate">
      <fail>
      Hibernate is not found. Please install Hibernate.
      </fail>
   </target>

   <target name="fail-if-no-hibernate-ext" unless="hibernate-ext">
      <fail>
      Hibernate-Extension is not found. Please install Hibernate-Extenstion.
      </fail>
   </target>
    
   <target name="gen-hbm" depends="init">

    <middlegen
         appname="mbws"
         prefsdir="."
         gui="false"
         databaseurl="${database.url}"
         driver="${database.driver}"
         username="${database.userid}"
         password="${database.password}"
         schema="${database.schema}"
         catalog="${database.catalog}"
      >
         <hibernate
         	version="3.0"
            destination="${dest.dir}"
            package="${package}"
            genXDocletTags="${gen.xdoclet-tag}"
       	    standardCascade="${hibernate.cascade}"
	    javaTypeMapper="middlegen.plugins.hibernate.HibernateJavaTypeMapper"
	 />
	 <table name="account" />
   	 <table name="character_item_mapping" />
   	 <table name="character_skill_mapping" />
   	 <table name="character_status" />
   	 <table name="character_visualappearance" />
   	 <table name="character_worldobject_mapping" />
   	 <table name="characterdata" />
   	 <table name="configuration" />
   	 <table name="item" />
   	 <table name="item_type" />
   	 <table name="map" />
   	 <table name="npc" />
   	 <table name="npc_skill_mapping" />
   	 <table name="npc_status" />
   	 <table name="npc_worldobject_mapping" />
   	 <table name="race" />
   	 <table name="skill" />
   	 <table name="skill_group" />
   	 <table name="skill_race_mapping" />
   	 <table name="worldobject" />
   	 <table name="worldobject_type" />
   	 <table name="zoneserver" />
   	 <table name="zoneserver_map_mapping" />
     <table name="languages" />
   	 <table name="language_text_mapping" />
    </middlegen>
  </target>

  <target name="gen-java" depends="gen-hbm">
    <hbm2java output="${dest.dir}">
      <fileset dir="${dest.dir}">
        <include name="**/*.hbm.xml" />
      </fileset>
    </hbm2java>
  </target>

  <target name="compile" depends="gen-java">
  </target>

</project>